<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Growth Chart SMART Application</title>
    <style>
        .register {
            display: none;
        }
        .requireRegistration .loading {
            display: none;
        }
        .requireRegistration .register {
            display: block;
        }
    </style>
    <script src="fhir-client.js"></script>
    <script>
        function launch() {
            // let clientID = localStorage.getItem('publicAppClientID');
            FHIR.oauth2.authorize({
                "client_id": "a1IlDAP-veznlxBWvwWZlnn9y6y9Yo3YVxGhFUraMwg", // OpenEMR
                "scope":  "patient/Patient.read patient/Observation.read launch/patient online_access openid profile",
            });
        }
        launch();
        // function saveClientID() {
        //     let clientID = document.querySelector("#clientID").value.trim();
        //     localStorage.setItem('publicAppClientID', clientID);
        //     launch();
        // }
        // let clientID = localStorage.getItem('publicAppClientID');
        // if (!clientID) {
        //     window.addEventListener('load', function() {
        //         document.body.classList.add("requireRegistration");
        //         document.querySelector("#save").addEventListener('click', saveClientID);
        //     })
        // } else {
        //     launch();
        // }
    </script>
</head>
<body>
<div class="loading">
    Loading...
</div>
<div class="register">
    This app must be registered.  Please enter the application clientID that this app will use:
    <input type="text" id="clientID" placeholder="clientID" />
    <input type="button" id="save" value="Save" />
</div>
</body>
</html>
